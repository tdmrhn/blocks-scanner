document.addEventListener("DOMContentLoaded",()=>{new class e{constructor(){this.blocksScannerWrapper=document.querySelector(".blocks_scanner"),this.tabWrapper=this.blocksScannerWrapper.querySelectorAll(".nav-tab-wrapper a"),this.tabContent=this.blocksScannerWrapper.querySelectorAll(".tab-content"),this.filterInputs=this.blocksScannerWrapper.querySelectorAll(".tab-content .dhn-filter, .tab-content .block-checkbox"),this.initialize()}toggleTab(e){event.preventDefault();let t=e.getAttribute("href").substring(1);this.tabWrapper.forEach(t=>t.classList.toggle("nav-tab-active",t===e)),this.tabContent.forEach(e=>e.classList.toggle("active",e.id===t))}updateRowCountAndFilter(){this.tabContent.forEach(e=>{let t=e.querySelector(".dhn-filter"),r=e.querySelectorAll(".block-checkbox"),a=e.querySelectorAll("tbody tr"),n=e.querySelector(".row-count"),o=t.value.trim().toLowerCase(),l=Array.from(r).filter(e=>e.checked).map(e=>e.value.toLowerCase()),i=0;a.forEach(e=>{let t=e.cells[1].textContent.trim().toLowerCase(),r=(0===l.length||l.includes(t))&&e.textContent.toLowerCase().includes(o);e.style.display=r?"":"none",r&&i++}),n.textContent=i})}sortGrid(e,t,r,a){let n;let o=e.querySelector("tbody"),l=Array.from(o.rows);switch(r){case"number":n=(e,r)=>Number(e.cells[t].innerHTML)-Number(r.cells[t].innerHTML);break;case"string":n=(e,r)=>{let a=e.cells[t].textContent.trim().toLowerCase(),n=r.cells[t].textContent.trim().toLowerCase();return a.localeCompare(n,void 0,{numeric:!0})};break;case"date":n=(e,r)=>new Date(e.cells[t].innerHTML)-new Date(r.cells[t].innerHTML)}"asc"===a?l.sort(n):l.sort((e,t)=>n(t,e)),o.innerHTML="",l.forEach(e=>o.appendChild(e))}initializeTableSorting(){this.tabContent.forEach(e=>{e.querySelectorAll("table").forEach(e=>{e.onclick=t=>{if("TH"!==t.target.tagName)return;let r=t.target,a=r.cellIndex,n=r.dataset.sortOrder||"asc";n="asc"===n?"desc":"asc",r.dataset.sortOrder=n,this.sortGrid(e,a,r.dataset.type,n)}})})}initialize(){this.tabWrapper.forEach(e=>e.addEventListener("click",()=>this.toggleTab(e))),this.tabWrapper[0].click(),this.filterInputs.forEach(e=>{e.addEventListener("input",()=>this.updateRowCountAndFilter()),e.addEventListener("change",()=>this.updateRowCountAndFilter())}),this.updateRowCountAndFilter(),this.initializeTableSorting()}}});