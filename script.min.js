document.addEventListener("DOMContentLoaded",()=>{class t{constructor(){this.tabWrapper=document.querySelectorAll(".nav-tab-wrapper a"),this.tabContent=document.querySelectorAll(".tab-content"),this.filterInputs=document.querySelectorAll(".tab-content .dhn-filter, .tab-content #block-dropdown"),this.initialize()}toggleTab(t){event.preventDefault();let e=t.getAttribute("href").substring(1);this.tabWrapper.forEach(e=>e.classList.toggle("nav-tab-active",e===t)),this.tabContent.forEach(t=>t.classList.toggle("active",t.id===e))}updateRowCountAndFilter(){this.tabContent.forEach(t=>{let e=t.querySelector(".dhn-filter"),r=t.querySelector("#block-dropdown"),a=t.querySelectorAll("tbody tr"),n=t.querySelector(".row-count"),o=e.value.trim().toLowerCase(),l=r.value.toLowerCase(),i=0;a.forEach(t=>{let e=t.cells[1].textContent.trim().toLowerCase(),r=("all"===l||e===l)&&t.textContent.toLowerCase().includes(o);t.style.display=r?"":"none",r&&i++}),n.textContent=i})}sortGrid(t,e,r,a){let n=t.querySelector("tbody"),o=Array.from(n.rows),l;switch(r){case"number":l=(t,r)=>Number(t.cells[e].innerHTML)-Number(r.cells[e].innerHTML);break;case"string":l=(t,r)=>{let a=t.cells[e].textContent.trim().toLowerCase(),n=r.cells[e].textContent.trim().toLowerCase();return a.localeCompare(n,void 0,{numeric:!0})};break;case"date":l=(t,r)=>new Date(t.cells[e].innerHTML)-new Date(r.cells[e].innerHTML)}"asc"===a?o.sort(l):o.sort((t,e)=>l(e,t)),n.innerHTML="",o.forEach(t=>n.appendChild(t))}initializeTableSorting(){this.tabContent.forEach(t=>{let e=t.querySelectorAll("table");e.forEach(t=>{t.onclick=e=>{if("TH"!==e.target.tagName)return;let r=e.target,a=r.cellIndex,n=r.dataset.sortOrder||"asc";n="asc"===n?"desc":"asc",r.dataset.sortOrder=n,this.sortGrid(t,a,r.dataset.type,n)}})})}initialize(){this.tabWrapper.forEach(t=>t.addEventListener("click",()=>this.toggleTab(t))),this.tabWrapper[0].click(),this.filterInputs.forEach(t=>{t.addEventListener("input",()=>this.updateRowCountAndFilter()),t.addEventListener("change",()=>this.updateRowCountAndFilter())}),this.updateRowCountAndFilter(),this.initializeTableSorting()}}new t});
